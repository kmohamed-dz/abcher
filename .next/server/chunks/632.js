exports.id=632,exports.ids=[632],exports.modules={300:(a,b,c)=>{Promise.resolve().then(c.bind(c,6865))},316:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(7408).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},2056:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>g,metadata:()=>f});var d=c(5735),e=c(6883);c(2704);let f={title:"أبشر - إدارة المدارس القرآنية",description:"منصة عربية لإدارة المدارس القرآنية"};function g({children:a}){return(0,d.jsx)("html",{lang:"ar",dir:"rtl",children:(0,d.jsxs)("body",{style:{backgroundColor:"#faf8f5"},className:"min-h-screen text-gray-900 antialiased",children:[a,(0,d.jsx)(e.Toaster,{position:"top-center",toastOptions:{duration:3e3,style:{fontFamily:"Cairo, sans-serif"},success:{style:{background:"#16a34a",color:"#ffffff"}},error:{style:{background:"#dc2626",color:"#ffffff"}}}})]})})}},2156:(a,b,c)=>{Promise.resolve().then(c.bind(c,6883))},2326:(a,b,c)=>{"use strict";c.d(b,{U:()=>e});var d=c(281);function e(){return(0,d.createBrowserClient)("https://zuppzhysrgmioyozrltp.supabase.co","sb_publishable_GQkKFgomb7ThK_H_csmdoQ_CYQOschE")}},2540:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,1921,23)),Promise.resolve().then(c.t.bind(c,440,23)),Promise.resolve().then(c.t.bind(c,4342,23)),Promise.resolve().then(c.t.bind(c,2265,23)),Promise.resolve().then(c.t.bind(c,5421,23)),Promise.resolve().then(c.t.bind(c,1335,23)),Promise.resolve().then(c.t.bind(c,664,23)),Promise.resolve().then(c.bind(c,4661))},2704:()=>{},3191:(a,b,c)=>{"use strict";c.d(b,{A_:()=>j,Yq:()=>h,cn:()=>f,r6:()=>i});var d=c(9314),e=c(6862);function f(...a){return(0,e.QP)((0,d.$)(a))}function g(a){return a instanceof Date?a:new Date(a)}function h(a){let b=g(a);return Number.isNaN(b.getTime())?"-":new Intl.DateTimeFormat("ar-DZ",{year:"numeric",month:"long",day:"numeric"}).format(b)}function i(a){let b=g(a);return Number.isNaN(b.getTime())?"-":new Intl.DateTimeFormat("ar-DZ",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(b)}let j=["المبتدئ","جزء عم","جزء تبارك","ثلث القرآن","نصف القرآن","ثلاثة أرباع القرآن","الحفظ الكامل"]},3425:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(7408).A)("clipboard-check",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]])},3769:(a,b,c)=>{Promise.resolve().then(c.bind(c,7175))},4041:(a,b,c)=>{Promise.resolve().then(c.bind(c,8074))},6487:()=>{},7175:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(7943).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/mohamed/abcher/app/dashboard/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/mohamed/abcher/app/dashboard/layout.tsx","default")},7225:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,5547,23))},7360:(a,b,c)=>{"use strict";c.d(b,{R:()=>g});let d=(0,c(2326).U)();function e(a){let b=a.toLowerCase();return b.includes("row-level security")||b.includes("permission denied")||b.includes("not allowed")}async function f(a){return d.from("profiles").select("id,full_name,role,school_id,phone,avatar_url").eq("id",a).maybeSingle()}async function g(){let a,{data:{user:b},error:c}=await d.auth.getUser();if(c)throw c;if(!b)return{user:null,profile:null};let g=await f(b.id);if(g.error){if(e(g.error.message))return{user:b,profile:null};throw g.error}if(g.data)return{user:b,profile:g.data};let{error:h}=await d.from("profiles").upsert([{id:b.id,full_name:"string"==typeof(a=b.user_metadata?.full_name)&&a.trim()?a.trim():b.email&&b.email.split("@")[0]||""}],{onConflict:"id"});if(h){if(e(h.message))return{user:b,profile:null};throw h}let i=await f(b.id);if(i.error){if(e(i.error.message))return{user:b,profile:null};throw i.error}return{user:b,profile:i.data??null}}},7408:(a,b,c)=>{"use strict";c.d(b,{A:()=>i});var d=c(7484);let e=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim(),f=a=>{let b=a.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,b,c)=>c?c.toUpperCase():b.toLowerCase());return b.charAt(0).toUpperCase()+b.slice(1)};var g={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let h=(0,d.forwardRef)(({color:a="currentColor",size:b=24,strokeWidth:c=2,absoluteStrokeWidth:f,className:h="",children:i,iconNode:j,...k},l)=>(0,d.createElement)("svg",{ref:l,...g,width:b,height:b,stroke:a,strokeWidth:f?24*Number(c)/Number(b):c,className:e("lucide",h),...!i&&!(a=>{for(let b in a)if(b.startsWith("aria-")||"role"===b||"title"===b)return!0;return!1})(k)&&{"aria-hidden":"true"},...k},[...j.map(([a,b])=>(0,d.createElement)(a,b)),...Array.isArray(i)?i:[i]])),i=(a,b)=>{let c=(0,d.forwardRef)(({className:c,...g},i)=>(0,d.createElement)(h,{ref:i,iconNode:b,className:e(`lucide-${f(a).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${a}`,c),...g}));return c.displayName=f(a),c}},7497:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,1921,23))},8074:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>F});var d=c(8249),e=c(7484),f=c(9099),g=c(6865),h=c(2116),i=c.n(h),j=c(7408);let k=(0,j.A)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]);var l=c(8762),m=c(3425);let n=(0,j.A)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]),o=(0,j.A)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var p=c(3191);let q=[{href:"/dashboard",label:"الرئيسية",icon:k},{href:"/dashboard/students",label:"الطلبة",icon:l.A},{href:"/dashboard/attendance",label:"الحضور",icon:m.A},{href:"/dashboard/messages",label:"الرسائل",icon:n},{href:"/dashboard/settings",label:"الإعدادات",icon:o}];function r(){let a=(0,f.usePathname)();return(0,d.jsx)("nav",{dir:"rtl",className:"fixed inset-x-0 bottom-0 z-40 border-t border-primary-100 bg-white md:hidden",children:(0,d.jsx)("ul",{className:"grid grid-cols-5",children:q.map(b=>{let c=a===b.href||a.startsWith(`${b.href}/`),e=b.icon;return(0,d.jsx)("li",{children:(0,d.jsxs)(i(),{href:b.href,className:(0,p.cn)("flex min-h-[44px] flex-col items-center justify-center gap-1 py-2 text-xs font-semibold",c?"text-brand-600":"text-gray-500"),children:[(0,d.jsx)(e,{className:(0,p.cn)("h-4 w-4",c?"text-brand-600":"text-gray-500")}),(0,d.jsx)("span",{children:b.label})]})},b.href)})})})}let s=(0,j.A)("book-open-check",[["path",{d:"M12 21V7",key:"gj6g52"}],["path",{d:"m16 12 2 2 4-4",key:"mdajum"}],["path",{d:"M22 6V4a1 1 0 0 0-1-1h-5a4 4 0 0 0-4 4 4 4 0 0 0-4-4H3a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1h6a3 3 0 0 1 3 3 3 3 0 0 1 3-3h6a1 1 0 0 0 1-1v-1.3",key:"8arnkb"}]]),t=(0,j.A)("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]),u=(0,j.A)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),v=(0,j.A)("library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]),w=(0,j.A)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),x=[{href:"/dashboard",label:"الرئيسية",icon:k},{href:"/dashboard/teachers",label:"المعلمون",icon:l.A},{href:"/dashboard/attendance",label:"الحضور",icon:m.A},{href:"/dashboard/homework",label:"الواجبات",icon:s},{href:"/dashboard/results",label:"النتائج",icon:t},{href:"/dashboard/messages",label:"الرسائل",icon:n},{href:"/dashboard/reports",label:"التقارير",icon:u},{href:"/dashboard/library",label:"المكتبة",icon:v},{href:"/dashboard/authority",label:"الجهة الوصية",icon:w},{href:"/dashboard/settings",label:"الإعدادات",icon:o}];function y(){let a=(0,f.usePathname)();return(0,d.jsxs)("div",{dir:"rtl",className:"sticky top-0 flex h-screen flex-col bg-white px-4 py-6",children:[(0,d.jsxs)("div",{className:"mb-6 px-2",children:[(0,d.jsx)("p",{className:"text-xs font-semibold text-primary-700",children:"نظام الإدارة"}),(0,d.jsx)("h2",{className:"mt-1 text-2xl font-extrabold text-brand-700",children:"أبشر"})]}),(0,d.jsx)("nav",{className:"flex-1 space-y-1 overflow-y-auto",children:x.map(b=>{let c=a===b.href||a.startsWith(`${b.href}/`),e=b.icon;return(0,d.jsxs)(i(),{href:b.href,className:(0,p.cn)("flex min-h-[44px] items-center gap-3 rounded-xl px-3 py-2 text-sm font-semibold transition",c?"bg-brand-600 text-white shadow-md":"text-gray-700 hover:bg-primary-50 hover:text-brand-700"),children:[(0,d.jsx)(e,{className:"h-4 w-4"}),(0,d.jsx)("span",{children:b.label})]},b.href)})}),(0,d.jsx)("div",{className:"mt-4 rounded-2xl bg-primary-50 p-3 text-xs leading-6 text-gray-600",children:"واجهة إدارة المدرسة القرآنية بوضوح وسهولة."})]})}var z=c(316);let A=(0,j.A)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);var B=c(2326);let C=(0,B.U)();function D(){let[a,b]=(0,e.useState)(!1),[c,f]=(0,e.useState)(!1),[h,j]=(0,e.useState)(null),[k,l]=(0,e.useState)([]),m=(0,e.useRef)(null);(0,e.useCallback)(async()=>{f(!0);try{let{data:{user:a}}=await C.auth.getUser();if(!a){j(null),l([]);return}let{data:b,error:c}=await C.from("profiles").select("school_id").eq("id",a.id).single();if(c)throw c;if(!b?.school_id){j(null),l([]);return}j(b.school_id);let{data:d,error:e}=await C.from("notifications").select("id,school_id,title,message,is_read,created_at").eq("school_id",b.school_id).order("created_at",{ascending:!1}).limit(10);if(e)throw e;l(d??[])}catch(b){let a=b instanceof Error?b.message:"تعذر تحميل الإشعارات.";g.Ay.error(a)}finally{f(!1)}},[]);let n=k.filter(a=>!a.is_read).length,o=async a=>{if(h&&!a.is_read)try{let{error:b}=await C.from("notifications").update({is_read:!0}).eq("id",a.id).eq("school_id",h);if(b)throw b;l(b=>b.map(b=>b.id===a.id?{...b,is_read:!0}:b))}catch(b){let a=b instanceof Error?b.message:"تعذر تحديث الإشعار.";g.Ay.error(a)}};return(0,d.jsxs)("div",{ref:m,dir:"rtl",className:"relative",children:[(0,d.jsxs)("button",{type:"button",onClick:()=>b(a=>!a),className:"relative inline-flex min-h-[44px] min-w-[44px] items-center justify-center rounded-full border border-primary-100 bg-white text-gray-700 hover:bg-primary-50","aria-label":"الإشعارات",children:[(0,d.jsx)(A,{className:"h-5 w-5"}),n>0?(0,d.jsx)("span",{className:"absolute -left-1 -top-1 inline-flex h-5 min-w-[20px] items-center justify-center rounded-full bg-red-600 px-1 text-[10px] font-bold text-white",children:n}):null]}),a?(0,d.jsxs)("div",{className:"absolute left-0 z-50 mt-2 w-80 rounded-xl border border-primary-100 bg-white p-3 shadow-md",children:[(0,d.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,d.jsx)("h3",{className:"font-bold text-primary-700",children:"الإشعارات"}),(0,d.jsx)("button",{type:"button",onClick:()=>b(!1),className:"text-xs text-gray-500 hover:text-gray-700",children:"إغلاق"})]}),c?(0,d.jsx)("div",{className:"flex min-h-[150px] items-center justify-center",children:(0,d.jsx)("div",{className:"h-9 w-9 animate-spin rounded-full border-4 border-primary-100 border-t-primary-600"})}):0===k.length?(0,d.jsxs)("div",{className:"rounded-lg border border-dashed border-primary-200 bg-primary-50 p-4 text-center",children:[(0,d.jsx)("p",{className:"mb-3 text-sm text-gray-600",children:"لا توجد إشعارات حالية."}),(0,d.jsx)(i(),{href:"/dashboard/messages",className:"inline-flex min-h-[44px] items-center justify-center rounded-lg bg-primary-600 px-4 py-2 text-sm text-white hover:bg-primary-700",children:"فتح الرسائل"})]}):(0,d.jsx)("ul",{className:"max-h-80 space-y-2 overflow-y-auto",children:k.map(a=>(0,d.jsx)("li",{children:(0,d.jsxs)("button",{type:"button",onClick:()=>{o(a)},className:`w-full rounded-lg border px-3 py-2 text-right ${a.is_read?"border-gray-100 bg-white":"border-primary-200 bg-primary-50"}`,children:[(0,d.jsx)("p",{className:"font-semibold text-gray-900",children:a.title}),(0,d.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:a.message}),(0,d.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:(0,p.r6)(a.created_at)})]})},a.id))})]}):null]})}function E(){let[a,b]=(0,e.useState)("المستخدم"),[c,f]=(0,e.useState)("-");return(0,d.jsx)("header",{dir:"rtl",className:"sticky top-0 z-30 border-b border-primary-100 bg-white/95 px-4 py-3 backdrop-blur md:px-6",children:(0,d.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,d.jsxs)("div",{className:"relative w-full max-w-lg",children:[(0,d.jsx)(z.A,{className:"pointer-events-none absolute right-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),(0,d.jsx)("input",{type:"search",placeholder:"بحث سريع...",className:"min-h-[44px] w-full rounded-xl border border-gray-200 bg-white py-2 pr-10 pl-3 text-[16px] outline-none ring-brand-600/20 focus:ring"})]}),(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)(D,{}),(0,d.jsx)(i(),{href:"/dashboard/settings",className:"hidden min-h-[44px] items-center rounded-xl border border-primary-100 px-3 text-right sm:flex",children:(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:a}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:c})]})})]})]})})}function F({children:a}){(0,f.useRouter)(),(0,e.useRef)(!1);let[b,c]=(0,e.useState)(!1);return b?(0,d.jsxs)("div",{dir:"rtl",className:"min-h-screen bg-app",children:[(0,d.jsxs)("div",{className:"mx-auto flex min-h-screen w-full max-w-[1600px]",children:[(0,d.jsx)("aside",{className:"hidden border-l border-primary-100 lg:block lg:w-72",children:(0,d.jsx)(y,{})}),(0,d.jsxs)("div",{className:"flex min-h-screen min-w-0 flex-1 flex-col",children:[(0,d.jsx)(E,{}),(0,d.jsx)("main",{className:"flex-1 px-4 py-5 pb-24 md:px-6 md:py-6 md:pb-6",children:a})]})]}),(0,d.jsx)(r,{})]}):(0,d.jsx)("section",{dir:"rtl",className:"flex min-h-screen items-center justify-center bg-app",children:(0,d.jsx)("div",{className:"h-11 w-11 animate-spin rounded-full border-4 border-primary-100 border-t-primary-600"})})}(0,B.U)(),c(7360)},8335:()=>{},8762:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(7408).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},8988:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,5547,23)),Promise.resolve().then(c.t.bind(c,5098,23)),Promise.resolve().then(c.t.bind(c,7644,23)),Promise.resolve().then(c.t.bind(c,3859,23)),Promise.resolve().then(c.t.bind(c,8099,23)),Promise.resolve().then(c.t.bind(c,6237,23)),Promise.resolve().then(c.t.bind(c,8562,23)),Promise.resolve().then(c.t.bind(c,6675,23))},9099:(a,b,c)=>{"use strict";var d=c(4839);c.o(d,"useParams")&&c.d(b,{useParams:function(){return d.useParams}}),c.o(d,"usePathname")&&c.d(b,{usePathname:function(){return d.usePathname}}),c.o(d,"useRouter")&&c.d(b,{useRouter:function(){return d.useRouter}})}};